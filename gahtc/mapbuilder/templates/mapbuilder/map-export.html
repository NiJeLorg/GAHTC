{% extends 'website/base.html' %} 
{% load staticfiles %} 

{% block head_js_block %}
<script src="https://maps.googleapis.com/maps/api/js?key={{ GOOGLE_API_KEY }}" async defer></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
 integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
 crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
 integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
 crossorigin=""></script>
 <script type="text/javascript" src="https://unpkg.com/leaflet-geosearch@2.6.0/dist/bundle.min.js"></script>
 <script src='https://unpkg.com/leaflet.gridlayer.googlemutant@latest/Leaflet.GoogleMutant.js'></script>
 <link  href="https://unpkg.com/leaflet-geosearch@latest/assets/css/leaflet.css" rel="stylesheet" />
 <script type="text/javascript" src="http://heyman.github.io/leaflet-areaselect/src/leaflet-areaselect.js"></script>
 <link rel="stylesheet" href="https://heyman.github.io/leaflet-areaselect/src/leaflet-areaselect.css">
 <script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-image/v0.0.4/leaflet-image.js'></script>
{% endblock %}

{% block css_block %}
<link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}" >
{% endblock%}
  
{% block content%}
  <div class="map-header white-header">
    <h3 class="map-header-text">Prehistoric Australia</h3>
    <div class="step-button-holder">
        <a class="button button-group" >My Maps</a>
        <a class="button button-group" >Save</a>
        <a class="button button-group" >Publish</a>
    </div>
  </div>
  <div id="map"></div>
<script>
    var lat = localStorage.getItem('lat');
    var long = localStorage.getItem('long');
    var center = [lat, long]
    var zoom = localStorage.getItem('zoom');
    var mapBound = JSON.parse(localStorage.getItem('bounds'));
    var southWest = [mapBound._southWest.lat, mapBound._southWest.lng],
        northEast = [mapBound._northEast.lat, mapBound._northEast.lng],
        mapBounds = [southWest, northEast];

// initialize the map
var map = L.map('map', {
    center: center,
    zoom: zoom,
});
var marker = L.marker(center).addTo(map);
var roads = L.gridLayer.googleMutant({
    type: 'roadmap', // valid values are 'roadmap', 'satellite', 'terrain' and 'hybrid'
}).addTo(map);
map.fitBounds(mapBounds);
</script>

{% endblock%}