{% extends "mapbuilder/base.html" %}
{% load bootstrap_pagination %}
{% block content %}
<div class="mapbuilder">
    <h3 class="mapbuilder-header">
        GAHTC Map Builder
    </h3>
    <p id="map-page-content">Map Builder is a tool to help create historical maps for inclusion in GAHTC content. To get started, click on "Create a New Map" or search for and edit another member's map from the Community Map Index below.</p>
    <div class="button-holder">
        <a class="button" href="{% url 'mapbuilder:startmap' %}">Create A New Map</a>
        {% comment %} <a class="button btn-next" id="edit-map" href="{% url 'mapbuilder:startmap' %}">Edit An Existing Map</a> {% endcomment %}
    </div>
    <div class="index-content">
        <span class="map-index">Community Map Index</span>
        <div class="search-bar">
            <form   class="data-form" action="." method="GET" accept-charset="utf-8">
                <button class="search-button">
                    <i class="fa fa-search search-icon"></i>
                </button>
                <input type="text" class="search-input" placeholder="Search for a map" name='q' value="{{ request.GET.q }}">
            </form>
        </div>
    </div>
    <div class="list-wrapper">
        <div class="list-header">
            <span>Below is a list of all maps created and published in Map Builder. Download a map as an image or edit an existing map in Map Builder.</span>
            <hr />
        </div>
        <ul class="list">
            {% for map in maps %}
            <!--Flexbox list item-->
            <li class="list-item">
                <div class="list-item__image">
                    <img src="/media/{{ map.base_map_image }}" alt="{{ map.name }}">
                </div>
                <div class="list-item__content">
                    <span class="map-info"> {{ map.name }}  Created {{ map.created_date|date:"m/d/Y" }} by {{ map.user.userProfile.first_name }} {{ map.user.userProfile.last_name }}</span>
                    <div class="list-item__actions">
                        <a download="{{ map.base_map_image }}" target="_blank" href="/media/{{ map.base_map_image }}" >Download</a>
                        <a href="{% url 'mapbuilder:map-export' id=map.id %}" >Edit</a>
                    </div>
                </div>
            </li>
            {% endfor %}
        </ul>
        {% bootstrap_paginate maps range=10 show_prev_next="false" show_first_last="true" %}
    </div>

</div>
<script>
    $('#edit-map').click(function(){
        localStorage.setItem('edit','edit')
    })
</script>
{% endblock %}
