{% extends 'website/base.html' %} 
{% load staticfiles %} 

{% block title %}My Bundles{% endblock %} 

{% block css_block %} 
{% endblock %} 

{% block head_js_block %} 
{% endblock %} 


{% block content %}
<!-- Page Content -->
<div class="container search-body">
    <div class="row">
        <div class="col-md-12">
            <h2 class="marginBottom15">My Bundles</h2>
        </div>
    </div>
    <div class="row">
        <div class="all-bundles col-md-12">
            <div class="marginBottom15">
                <div class="panel-group" id='accordion_bundles' role='tablist' aria-multiselectable='true'>
                    {% for bundle in bundles_returned %}
                    <div class="panel panel-default bundleResult" data-bundleid="{{ bundle.id }}">
                        <div class="bundle-title">
                            <h3 class="title">{{ bundle.title }}</h3>
                            {% if request.user.userProfile.verified %}
                                <button type="button" class="btn btn-danger gahtcRed marginRight5 downloadBundle" data-bundleid="{{ bundle.id }}" title="Download bundle">
                                    <span class="glyphicon glyphicon-download" aria-hidden="true"></span>
                                </button>
                            {% else %}
                                <button type="button" class="btn btn-danger gahtcRed marginRight5" data-toggle="modal" data-target="#waitingForVerification" title="Download bundle">
                                    <span class="glyphicon glyphicon-download" aria-hidden="true"></span>
                                </button>
                            {% endif %}
                            <button type="button" class="btn btn-danger gahtcRed removeBundle" data-bundleid="{{ bundle.id }}" title="Delete bundle">
                                <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
                            </button>
                        </div>
                        <main class='panel-main' id="bundle_{{ bundle.id }}">
                            {% include 'website/show_bundle.html' with bundle_returned=bundle %}
                        </main>
                    </div>
                    {% empty %}
                    <h4>No Bundles Yet Created!</h4>
                    <p><a href="#" class="create-new-bundle">Create a new bundle here</a> and then search for course materials using the search box above. Once you find the course materials you're looking for, you can add them to your bundle and download them from here. </p>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <div class="row marginBottom100">
    </div>
</div>

<button class="scrollToTop" data-toggle='tooltip' data-placement='right' title='Scroll back to top'>
    <span class="glyphicon glyphicon-arrow-up"></span>
</button> 
{% endblock %}

{% block modal_block %}
<!-- Download Course Bundle Modal -->
<div class="modal fade" id="downloadModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Download Course Materials</h4>
            </div>
            <div class="modal-body">
                <div id="downloadFileArea">
                    <div class="containter">
                        <div class="row">
                            <div class="col-md-3">
                                <img class="img-responsive pull-right" src="{% static 'website/css/images/spiffygif_114x114.gif' %}" />
                            </div>
                            <div class="col-md-9">
                                <h2>Zipping Up Your Bundle!</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Create New Bundle Modal -->
<div class="modal fade" id="newBundleModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Create New Bundle</h4>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" id="newBundleName" placeholder="Name your bundle here.">
                    </div>
                    <div id="noBundleTitleAlert" class="alert alert-warning hidden" role="alert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        Please add a title!
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="createNewBundle">Save</button>
            </div>
        </div>
    </div>
</div>
<!-- Awaiting verification modal -->
<div class="modal fade" id="waitingForVerification" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Your account is awaiting verification.</h4>
            </div>
            <div class="modal-body">
                <p>Your account has not yet been verified by a GAHTC administrator. Once your account is verified, you will be able to download course materials. You will be notified by email when your account has been verified. In the meantime, you can continue to search the site and add resources to your bundles. Thank you!</p>
            </div>
        </div>
    </div>
</div>
<!-- Lecture Slides Modal -->
<div class="modal fade" id="slideshow" tabindex="-1" role="dialog" aria-labelledby="mySlideshow">
</div>
<div class="modal fade" id="moduleFullDescription" tabindex="-1" role="dialog" aria-labelledby="moduleFullDescription">
</div>
<div class="modal fade" id="lectureFullDescription" tabindex="-1" role="dialog" aria-labelledby="lectureFullDescription">
</div>
{% endblock %} 

{% block js_block %}
<script type="text/javascript" src="{% static 'website/js/gahtcApplication.js' %}"></script>
<script type="text/javascript" src="{% static 'website/js/application.js' %}"></script>
<script type="text/javascript" src="{% static 'website/js/controllers.js' %}"></script>
{% endblock %}
