{% extends 'website/base_admin.html' %}
{% load staticfiles %}

{% block title %}Home{% endblock %}

{% block head_js_block %}
{% endblock %}

{% block css_block %}
<link rel="stylesheet" type="text/css" href="{% static 'website/css/bootstrap-sortable.css' %}">
{% endblock %}
	

{% block content %}

<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h3>Admin Dashboard</h3>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <h4>Create New Content</h4>
		<a class="btn btn-default" href="{% url 'admin_module' %}" role="button">Create a Module</a>
    	<a class="btn btn-default" href="{% url 'admin_moduledoc' %}" role="button">Create a Module Document</a>
    	<a class="btn btn-default" href="{% url 'admin_lecture' %}" role="button">Create a Lecture</a>
    	<a class="btn btn-default" href="{% url 'admin_lecturedoc' %}" role="button">Create a Lecture Document</a>
    </div>  
  </div>
  <br />
  <div class="row">
    <div class="col-md-12">
      <h4>Coming Soon Modules</h4>
		<a class="btn btn-default" href="{% url 'admin_coming_soon_module' %}" role="button">Create a Coming Soon Module</a>
		<a class="btn btn-default" href="{% url 'admin_remove_coming_soon_modules' %}" role="button">Remove Coming Soon Modules</a>
    </div>  
  </div>
  <br />
  <div class="row">
    <div class="col-md-12">
    	{% if modulesObjects %}
    	<div class="panel-group" id="accordion_modules" role="tablist" aria-multiselectable="true">
	    	{% for module in modulesObjects %}
			<div class="panel panel-default">
                <div class="panel-heading" role="tab" id="heading_{{ module.id }}">
                    <a class="noTextDecoration" role="button" data-toggle="collapse" data-parent="#accordion_modules" href="#{{ module.id }}" aria-expanded="true" aria-controls="{{ module.id }}">
                        <h4 class="panel-title">
							<span class="label label-primary">{{ module.title }}</span>
						</h4>
					</a>
				</div>

				<div id="{{ module.id }}" class="panel-collapse collapse {% if forloop.first %}in{% endif %}" role="tabpanel" aria-labelledby="{{ module.id }}">
					<div class="panel-body">
						<div class="pull-right">
							<a class="btn btn-default" href="/admin_module/{{ module.id }}" role="button">Edit Module</a> 
							<a class="btn btn-danger" href="/admin_removemodule/{{ module.id }}" role="button">Remove Module</a>
						</div>
				        <table class="table table-striped table-condensed sortable">
						    <thead>
						      <th>Type</th>
						      <th>Status</th>
						      <th>Edit</th>
						      <th>Remove</th>
						      <th>Title</th>
						      <th>File Name</th>
						      <th>File Size</th>
						      <th>Authors</th>
						      <th>Created</th>
						    </thead>
						    <tbody>
						    	{% if module.moduleDocumentsObjects %}
							      {% for moduleDocument in module.moduleDocumentsObjects %}
							        <tr>
							          <td><span class="label label-primary">Module Document</span></td>
							          <td>
							            {% if moduleDocument.extracted %}
							              <p class="text-success"><strong>Ready to Go</strong></p>
							            {% else %}
							              <p class="text-info"><strong>Data Being Extracted</strong></p>
							            {% endif %}
							          </td>
							          <td>
							          	<a class="btn btn-default" href="/admin_moduledoc/{{ moduleDocument.id }}" role="button">Edit</a>
							          </td>
							          <td>
							          	<a class="btn btn-danger" href="/admin_removemoduledoc/{{ moduleDocument.id }}" role="button">Remove</a>
							          </td>
							          <td>{{ moduleDocument.title }}</td>
							          <td>{{ moduleDocument.documentName }}</td>
							          <td>{{ moduleDocument.document.size|filesizeformat }}</td>
							          <td>{{ moduleDocument.authors }}</td>
							          <td>{{ moduleDocument.created }}</td>
							        </tr>
							      {% endfor %}
						      	{% endif %}
						      	{% if module.lecturesObjects %}
							      {% for lecture in module.lecturesObjects %}
							        <tr>
							          <td><span class="label label-success">Lecture</span></td>
							          <td>
							            {% if lecture.extracted %}
							              <p class="text-success"><strong>Ready to Go</strong></p>
							            {% else %}
							              <p class="text-info"><strong>Data Being Extracted</strong></p>
							            {% endif %}
							          </td>
							          <td>
							          	<a class="btn btn-default" href="/admin_lecture/{{ lecture.id }}" role="button">Edit</a>
							          </td>
							          <td>
							          	<a class="btn btn-danger" href="/admin_removelecture/{{ lecture.id }}" role="button">Remove</a>
							          </td>
							          <td>{{ lecture.title }}</td>
							          <td>{{ lecture.lectureName }}</td>
							          <td>{{ lecture.presentation.size|filesizeformat }}</td>
							          <td>{{ lecture.authors }}</td>
							          <td>{{ lecture.created }}</td>					       
							        </tr>
										{% if lecture.lectureSegmentsObjects %}
									      {% for ls in lecture.lectureSegmentsObjects %}
									        <tr>
									          <td><span class="label label-ls">Lecture Segment</span></td>
									          <td>
									            {% if ls.updated_lecture_review %}
									              <p class="text-warning"><strong>Updated Lecture, Please Review</strong></p>
									            {% elif ls.extracted %}
									              <p class="text-success"><strong>Ready to Go</strong></p>
									            {% else %}
									              <p class="text-info"><strong>Data Being Extracted</strong></p>
									            {% endif %}
									          </td>
									          <td>
									          	<a class="btn btn-default" href="/admin_lecturesegment/{{ ls.id }}" role="button">Edit</a>
									          </td>
									          <td>
									          	<a class="btn btn-danger" href="/admin_removelecturesegment/{{ ls.id }}" role="button">Remove</a>
									          </td>
									          <td>{{ ls.title }}</td>
									          <td>{{ ls.lectureName }}</td>
									          <td>{{ ls.presentation.size|filesizeformat }}</td>
									          <td>{{ ls.authors }}</td>
									          <td>{{ ls.created }}</td>	
									        </tr>
									      {% endfor %}
									    {% endif %}	
										{% if lecture.lectureDocumentsObjects %}
									      {% for ld in lecture.lectureDocumentsObjects %}
									        <tr>
									          <td><span class="label label-info">Lecture Document</span></td>
									          <td>
									            {% if ld.extracted %}
									              <p class="text-success"><strong>Ready to Go</strong></p>
									            {% else %}
									              <p class="text-info"><strong>Data Being Extracted</strong></p>
									            {% endif %}
									          </td>
									          <td>
									          	<a class="btn btn-default" href="/admin_lecturedoc/{{ ld.id }}" role="button">Edit</a>
									          </td>
									          <td>
									          	<a class="btn btn-danger" href="/admin_removelecturdoc/{{ ld.id }}" role="button">Remove</a>
									          </td>
									          <td>{{ ld.title }}</td>
									          <td>{{ ld.documentName }}</td>
									          <td>{{ ld.document.size|filesizeformat }}</td>
									          <td>{{ ld.authors }}</td>
									          <td>{{ ld.created }}</td>	
									        </tr>
									      {% endfor %}
										{% endif %}
							      {% endfor %}
								{% endif %}


						    </tbody>
						  </table>
					</div>
				</div>
			</div>
			{% endfor %}
			</div>
		{% endif %}
    </div>
  </div>

</div> <!-- /container -->
{% endblock %}


{% block js_block %}
<script type="text/javascript" src="{% static 'website/js/moment.min.js' %}"></script>
<script type="text/javascript" src="{% static 'website/js/bootstrap-sortable.js' %}"></script>
{% endblock %}





	
	

